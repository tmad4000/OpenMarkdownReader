<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; script-src 'self' https://cdnjs.cloudflare.com">
  <title>OpenMarkdownReader</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css" media="(prefers-color-scheme: light)">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" media="(prefers-color-scheme: dark)">
  <link rel="icon" type="image/svg+xml" href="icon.svg">
</head>
<body>
  <div class="titlebar" id="titlebar">
    <button id="sidebar-toggle" class="sidebar-toggle" title="Toggle Sidebar (⌘B)">
      <svg viewBox="0 0 20 20" fill="currentColor" width="16" height="16">
        <path d="M2 4.5A1.5 1.5 0 013.5 3h13A1.5 1.5 0 0118 4.5v11a1.5 1.5 0 01-1.5 1.5h-13A1.5 1.5 0 012 15.5v-11zM3.5 4a.5.5 0 00-.5.5v11a.5.5 0 00.5.5H7V4H3.5zM8 4v12h8.5a.5.5 0 00.5-.5v-11a.5.5 0 00-.5-.5H8z"/>
      </svg>
    </button>
    <div class="tab-bar-wrapper">
      <div id="tab-bar" class="tab-bar"></div>
      <button id="new-tab-btn" class="new-tab-btn" title="New Tab (⌘T)">+</button>
    </div>
    <div class="titlebar-drag-spacer"></div>
    <button id="save-btn" class="save-btn hidden" title="Save (⌘S)">
      <svg viewBox="0 0 16 16" fill="currentColor" width="14" height="14">
        <path d="M11.013 2.513a1.75 1.75 0 012.475 2.474l-6.5 6.5a.75.75 0 01-.354.198l-3.5 1a.75.75 0 01-.928-.928l1-3.5a.75.75 0 01.198-.354l6.5-6.5a.25.25 0 00-.354-.354l-6.5 6.5-.086.302-.302.086 6.5-6.5z"/>
        <path d="M3.5 5.75v8.5c0 .414.336.75.75.75h8.5a.75.75 0 00.75-.75v-8.5a.75.75 0 00-.75-.75h-1.5a.75.75 0 010-1.5h1.5A2.25 2.25 0 0115 5.75v8.5A2.25 2.25 0 0112.75 16h-8.5A2.25 2.25 0 012 14.25v-8.5A2.25 2.25 0 014.25 3.5h1.5a.75.75 0 010 1.5h-1.5a.75.75 0 00-.75.75z"/>
      </svg>
      Save
    </button>
    <button id="edit-toggle-btn" class="edit-toggle-btn" title="Toggle Edit Mode (⌘E)">
      <svg viewBox="0 0 16 16" fill="currentColor" width="14" height="14">
        <path d="M11.013 1.427a1.75 1.75 0 012.474 0l1.086 1.086a1.75 1.75 0 010 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 01-.927-.928l.929-3.25c.081-.286.235-.547.445-.758l8.61-8.61zm1.414 1.06a.25.25 0 00-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 000-.354l-1.086-1.086zM11.189 6.25L9.75 4.81l-6.286 6.287a.25.25 0 00-.064.108l-.558 1.953 1.953-.558a.249.249 0 00.108-.064l6.286-6.286z"/>
      </svg>
    </button>
  </div>

  <div class="main-container">
    <!-- Sidebar -->
    <div id="sidebar" class="sidebar hidden">
      <div class="sidebar-header">
        <span class="sidebar-title">Files</span>
        <button id="open-folder-btn" class="sidebar-btn" title="Open Folder (⌘⇧O)">
          <svg viewBox="0 0 20 20" fill="currentColor" width="14" height="14">
            <path d="M3.75 3A1.75 1.75 0 002 4.75v10.5c0 .966.784 1.75 1.75 1.75h12.5A1.75 1.75 0 0018 15.25v-8.5A1.75 1.75 0 0016.25 5H9.414a.25.25 0 01-.177-.073l-.896-.897A1.75 1.75 0 006.586 3.5H3.75z"/>
          </svg>
        </button>
      </div>
      <div id="file-tree" class="file-tree"></div>
    </div>

    <!-- Main content area -->
    <div class="content-area">
      <div id="drop-zone" class="drop-zone">
        <div class="welcome">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
          </svg>
          <h1>OpenMarkdownReader</h1>
          <p>Drop a markdown file here or</p>
          <div class="welcome-buttons">
            <button id="open-btn" class="welcome-btn">
              <svg viewBox="0 0 16 16" fill="currentColor" width="16" height="16">
                <path d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V4.664a.25.25 0 00-.073-.177l-2.914-2.914a.25.25 0 00-.177-.073H3.75z"/>
              </svg>
              Open File
            </button>
            <button id="open-folder-welcome-btn" class="welcome-btn welcome-btn-secondary">
              <svg viewBox="0 0 16 16" fill="currentColor" width="16" height="16">
                <path d="M1.75 2.5a.25.25 0 00-.25.25v10.5c0 .138.112.25.25.25h12.5a.25.25 0 00.25-.25v-8.5a.25.25 0 00-.25-.25H7.414a.25.25 0 01-.177-.073l-.896-.897A.75.75 0 005.586 3H1.75z"/>
              </svg>
              Open Folder
            </button>
          </div>
          <p class="hint">⌘N new | ⌘O open | ⌘⇧O folder | ⌘P search</p>
        </div>
      </div>

      <div id="content" class="content hidden">
        <div id="editor-container" class="editor-container hidden">
          <textarea id="editor" class="editor" spellcheck="false"></textarea>
        </div>
        <article id="markdown-body" class="markdown-body"></article>
      </div>
    </div>
  </div>

  <!-- Command Palette / File Search -->
  <div id="command-palette" class="command-palette hidden">
    <div class="command-palette-backdrop"></div>
    <div class="command-palette-modal">
      <input type="text" id="command-palette-input" class="command-palette-input" placeholder="Search files..." autocomplete="off">
      <div id="command-palette-results" class="command-palette-results"></div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/12.0.0/marked.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="renderer.js"></script>
</body>
</html>
